<html><body bgcolor="#042029" text="#cccccc"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p>A palindrome is a string that reads the same forwards and backwards.
For example, "abba" and "racecar" are palindromes.</p>
<br></br>
<p>An odd palindrome is a palindrome with an odd length.
For example, "racecar" is an odd palindrome but "abba" is not.
The middle letter of an odd palindrome is called its center.</p>
<br></br>
<p>Limak has a string <b>s</b> consisting of N lowercase English letters.</p>
<br></br>
<p>For each valid i, let X[i] be the number of palidromic subsequences of <b>s</b> such that their center is <b>s</b>[i].</p>
<br></br>
<p>In other words:
For a fixed i, there are exactly 2^(N-1) ways to erase some characters of <b>s</b> other than the character <b>s</b>[i].
X[i] is the number of ways of erasing for which the string that remains to the left of <b>s</b>[i] is the reverse of the string that remains to the right of <b>s</b>[i].</p>
<br></br>
<p>For each i, compute the value Y[i] = ((i+1) * X[i]) modulo 1,000,000,007.
Then, compute and return the bitwise XOR of all the values Y[i].</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>PalindromicSubseq2</td></tr><tr><td>Method:</td><td>solve</td></tr><tr><td>Parameters:</td><td>string</td></tr><tr><td>Returns:</td><td>int</td></tr><tr><td>Method signature:</td><td>int solve(string s)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>s</b> will contain exactly N characters.</td></tr><tr><td align="center" valign="top">-</td><td>N will be between 1 and 3000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each character in <b>s</b> will be a lowercase English letter 'a' - 'z'.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;axbcba&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 31</pre></td></tr><tr><td><table><tr><td colspan="2"><p>For this string we have X = {1, 2, 2, 4, 2, 1}.
Thus, you should return the value (1*1) XOR (2*2) XOR (3*2) XOR (4*4) XOR (5*2) XOR (6*1) = 31.</p>
<br></br>
<p>Here is an explanation why X[3] = 4:
Given that we want to keep the character <b>s</b>[3], there are 32 possible subsequences of <b>s</b>.
Among these there are 4 palindromes centered at <b>s</b>[3]:</p>
<pre>
...c..
a..c.a
..bcb.
a.bcba
</pre></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;eeeee&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 14</pre></td></tr><tr><td><table><tr><td colspan="2"><p>Here we have X[2] = 6.
The six ways of erasing that produce a palindrome centered at <b>s</b>[2] are the following ones:</p>
<pre>
..e..
.ee.e
.eee.
e.e.e
e.ee.
eeeee
</pre>
<p>Note that we count each way of erasing characters separately, even if different ways of erasing produce the same palindromic string.
So, not all X[i] are equal to 6 here.</p></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;tcoct&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 4</pre></td></tr><tr><td><table><tr><td colspan="2">X[] = {1, 2, 4, 2, 1}</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;zyzyzzzzxzyz&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 221</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;</pre></td></tr></table></td></tr><tr><td><pre>Returns: 1044407608</pre></td></tr><tr><td><table><tr><td colspan="2">Note that in this case the answer exceeds the modulo value, because we return the XOR of modulo-ed values, without computing the modulo of that XOR.</td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>